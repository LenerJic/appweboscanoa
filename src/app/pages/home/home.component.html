<p-toast></p-toast>
<div class="container-fluid px-4">
    <h1 class="mt-4">Página Principal</h1>
    <div class="grid p-2">
        <div class="col-12 md:col-6 lg:col-3">
            <div class="surface-card shadow-2 p-3 border-round border-left-3 border-blue-400">
                <div class="flex justify-content-between">
                    <div>
                        <a [routerLink]="['../empleados']" class="no-underline hover:underline text-blue-400">
                            <span class="block text-500 font-medium mb-3">Empleados</span>
                            <div class="text-900 font-medium text-xl">{{totalUsers}}</div>
                        </a>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-blue-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-id-card text-blue-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 md:col-6 lg:col-3">
            <div class="surface-card shadow-2 p-3 border-round border-left-3 border-yellow-400">
                <div class="flex justify-content-between">
                    <div>
                        <a [routerLink]="['../clientes']" class="no-underline hover:underline text-yellow-400">
                            <span class="block text-500 font-medium mb-3">Clientes</span>
                            <div class="text-900 font-medium text-xl">{{totalClientes}}</div>
                        </a>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-yellow-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-users text-yellow-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 md:col-6 lg:col-3">
            <div class="surface-card shadow-2 p-3 border-round border-left-3 border-cyan-400">
                <div class="flex justify-content-between">
                    <div>
                        <a [routerLink]="['../productos']" class="no-underline hover:underline text-cyan-400">
                            <span class="block text-500 font-medium mb-3">Productos</span>
                            <div class="text-900 font-medium text-xl">{{totalProductos}}</div>
                        </a>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-cyan-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-box text-cyan-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 md:col-6 lg:col-3">
            <div class="surface-card shadow-2 p-3 border-round border-left-3 border-green-400">
                <div class="flex justify-content-between">
                    <div>
                        <a [routerLink]="['../detail-venta']" class="no-underline hover:underline text-green-400">
                            <span class="block text-500 font-medium mb-3">Ventas realizadas hoy</span>
                            <div class="text-900 font-medium text-xl">{{totalVentasHoy}}</div>
                        </a>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-green-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-dollar text-green-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="lowStockProducts" class="col-12 md:col-6 lg:col-3">
            <div class="bg-yellow-50 shadow-2 p-3 border-round border-left-3 border-yellow-400">
                <div class="flex justify-content-between">
                    <div>
                        <div class="cursor-pointer hover:underline text-yellow-400" (click)="lowStockExport()">
                            <span class="block text-500 font-medium mb-3">Productos con bajo stock</span>
                            <div class="text-900 font-medium text-xl">{{lowStockProducts}}</div>
                        </div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-yellow-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-exclamation-triangle text-yellow-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="outofStockProducts" class="col-12 md:col-6 lg:col-3">
            <div class="bg-red-50 shadow-2 p-3 border-round border-left-3 border-red-400">
                <div class="flex justify-content-between">
                    <div>
                        <div class="cursor-pointer hover:underline text-red-400" (click)="outofStockExport()">
                            <span class="block text-500 font-medium mb-3">Productos sin stock</span>
                            <div class="text-900 font-medium text-xl">{{outofStockProducts}}</div>
                        </div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-red-100 border-round" style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-exclamation-circle text-red-500 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="grid p-2">
        <!--? #region Datos del Usuario -->
        <div class="col-12 md:col-6">
            <div class="surface-section p-4 shadow-2 border-round border-solid border-primary-300">
                <div class="font-medium text-3xl text-900 mb-3">Información personal</div>
                <ul class="list-none p-0 m-0">
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Cargo:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.tipoEmpleado}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Nombres:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.nombres}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Apellidos:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.apellidoPat + ' ' +datoEmpleado?.apellidoMat}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">{{tipoDocumento}}</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.nroDocumento}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Direccion:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.direccion}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Correo:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.correo}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Celular:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.celular}}</div>
                    </li>
                    <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap">
                        <div class="text-500 w-6 md:w-2 font-medium mr-2">Fecha de Nacimiento:</div>
                        <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">{{datoEmpleado?.fechaNacimiento | date:'dd/MM/yyyy'}}</div>
                    </li>
                </ul>
            </div>
        </div>
        <!--? #endregion -->
        <div class="col-12 md:col-6">
            <div class="surface-card p-4 shadow-2 border-round border-top-3 border-teal-500">
                <div class="grid">
                    <div class="text-3xl font-medium text-900 mb-3 col">Cambiar contraseña</div>
                    <button pButton pRipple type="button" [icon]="icon_lock ? 'pi pi-lock' : 'pi pi-lock-open'"
                     class="p-button-rounded p-button-secondary ml-3 col-fixed" (click)="clickEvent()"></button>
                </div>
                <form [formGroup]="PasswordForm" (ngSubmit)="onSubmit()" class="mx-2">
                    <div class="field grid">
                        <label for="password1" class="col-12 mb-2 md:col-2 md:mb-0 ">Nueva Contraseña:</label>
                        <div class="col-12 md:col-10">
                            <p-password id="password1" formControlName="password" placeholder="Ingrese su nueva contraseña"
                            [toggleMask]="true" [feedback]="false" [disabled]="deshabilitar"></p-password>
                            <div *ngIf="password.invalid && (password.dirty || password.touched)">
                                <small *ngIf="password.errors?.['required']" class="p-error"><p>Ingrese una contraseña</p></small>
                                <small *ngIf="password.errors?.['minlength']" class="p-error">Su contraseña debe tener más de 6 caracteres.</small>
                                <small *ngIf="password.errors?.['maxlength']" class="p-error">Su contraseña superó el limite de caracteres.</small>
                            </div>
                        </div>
                    </div>
                    <div class="field grid">
                        <label for="password2" class="col-12 mb-2 md:col-2 md:mb-0 ">Confirmar Contraseña:</label>
                        <div class="col-12 md:col-10">
                            <p-password id="password2" formControlName="passwordConfirm" placeholder="Vuelva a escribir su contraseña"
                            [toggleMask]="true" [feedback]="false" [disabled]="deshabilitar"></p-password>
                            <div *ngIf="(passwordConfirm.dirty || passwordConfirm.touched) && password.value.trim() !== ''">
                                <small *ngIf="passwordConfirm.errors?.['required']" class="p-error">Repita su contraseña.<br></small>
                                <small *ngIf="validarPassword(PasswordForm)===false && password.touched" class="p-error">Asegúrese de ingresar correctamente su contraseña.</small>
                            </div>
                        </div>
                    </div>    
                    <p-button label="Guardar" [disabled]="!PasswordForm.valid || validarPassword(PasswordForm)===false || deshabilitar"
                    [loading]="cargando" type="ngSubmit"></p-button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-12"></div>
</div>